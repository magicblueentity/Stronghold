<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stronghold</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-grid"></div>

    <div class="setup-modal hidden" id="setupModal">
      <div class="setup-card">
        <h2 data-i18n="setup_title">Willkommen bei Stronghold</h2>
        <p data-i18n="setup_desc">Einmalige Grundeinrichtung fuer Alltag und Sicherheit.</p>
        <div class="settings-grid">
          <label data-i18n="settings_language">Sprache
            <select id="setupLanguageSelect">
              <option value="de">Deutsch</option>
              <option value="en">English</option>
            </select>
          </label>
          <label data-i18n="settings_cpu">CPU Alert Threshold (%)
            <input type="number" id="setupCpuInput" min="20" max="95" step="1" value="75" />
          </label>
          <label data-i18n="settings_memory">Memory Alert Threshold (%)
            <input type="number" id="setupMemoryInput" min="20" max="95" step="1" value="70" />
          </label>
          <label class="checkbox-row">
            <input type="checkbox" id="setupDryRunInput" checked />
            <span data-i18n="settings_dry_run">Response Engine im Dry-Run-Modus</span>
          </label>
          <label class="checkbox-row">
            <input type="checkbox" id="setupAutoScanInput" />
            <span data-i18n="settings_autoscan">Automatischer Scan beim Start</span>
          </label>
        </div>
        <div class="actions">
          <button id="setupFinishBtn" data-i18n="setup_finish">Setup abschliessen</button>
        </div>
      </div>
    </div>

    <header class="topbar">
      <div>
        <p class="eyebrow" data-i18n="suite_title">STRONGHOLD SECURITY PLATFORM</p>
        <h1>STRONGHOLD</h1>
      </div>
      <div class="version" id="versionBadge">v26.1.1</div>
    </header>

    <nav class="nav">
      <button class="nav-btn active" data-view="dashboard" data-i18n="nav_dashboard">Dashboard</button>
      <button class="nav-btn" data-view="live" data-i18n="nav_live">Live Monitor</button>
      <button class="nav-btn" data-view="threat" data-i18n="nav_threat">Threat Center</button>
      <button class="nav-btn" data-view="health" data-i18n="nav_health">System Health</button>
      <button class="nav-btn" data-view="logs" data-i18n="nav_logs">Logs</button>
      <button class="nav-btn" data-view="settings" data-i18n="nav_settings">Settings</button>
    </nav>

    <main>
      <section class="view active" id="view-dashboard">
        <div class="card score-card">
          <h2 data-i18n="dashboard_score">Sicherheits-Score</h2>
          <div class="score-wrap">
            <div class="score-circle" id="scoreCircle">--</div>
            <div>
              <p><span data-i18n="label_status">Status</span>: <span id="riskStatus">-</span></p>
              <p><span data-i18n="label_active_threats">Aktive Bedrohungen</span>: <strong id="activeThreats">0</strong></p>
              <p><span data-i18n="label_network_connections">Netzwerkverbindungen</span>: <strong id="networkConnections">0</strong></p>
            </div>
          </div>
          <div class="actions">
            <button id="scanBtn" data-i18n="btn_fullscan">Vollscan starten</button>
            <button id="seedBtn" data-i18n="btn_seedlogs">Beispiel-Logs laden</button>
            <button id="snapshotBtn" data-i18n="btn_snapshot">Snapshot</button>
          </div>
        </div>

        <div class="card map-card">
          <h2 data-i18n="map_title">Interaktive Netzwerk-Map</h2>
          <canvas id="mapCanvas" width="920" height="320"></canvas>
        </div>
      </section>

      <section class="view" id="view-live">
        <div class="card">
          <h2 data-i18n="live_title">Live Netzwerk-Feed</h2>
          <table>
            <thead>
              <tr><th data-i18n="table_proto">Proto</th><th data-i18n="table_local">Lokal</th><th data-i18n="table_remote">Remote</th><th data-i18n="table_status">Status</th><th>PID</th></tr>
            </thead>
            <tbody id="connectionRows"></tbody>
          </table>
        </div>
      </section>

      <section class="view" id="view-threat">
        <div class="card">
          <h2 data-i18n="threat_title">Threat Center</h2>
          <div class="inline-actions">
            <input type="number" id="pidInput" placeholder="PID" />
            <button id="isolateBtn" data-i18n="btn_isolate">Prozess isolieren</button>
            <input type="text" id="ipInput" placeholder="IP" />
            <button id="blockIpBtn" data-i18n="btn_block_ip">IP 30 Min blockieren</button>
          </div>
          <div class="inline-actions">
            <input type="text" id="fileInput" data-i18n-placeholder="placeholder_file" placeholder="Pfad zur Datei" />
            <button id="quarantineBtn" data-i18n="btn_quarantine">Datei quarantänen</button>
            <button id="rollbackBtn" data-i18n="btn_rollback">Registry Rollback</button>
          </div>
          <pre id="responseOutput"></pre>
        </div>
      </section>

      <section class="view" id="view-health">
        <div class="card">
          <h2 data-i18n="health_title">System Health Findings</h2>
          <div id="findingsList"></div>
        </div>
      </section>

      <section class="view" id="view-logs">
        <div class="card">
          <h2 data-i18n="logs_title">Threat Logs</h2>
          <div class="inline-actions">
            <button id="refreshLogsBtn" data-i18n="btn_refresh">Aktualisieren</button>
            <button id="exportCsvBtn" data-i18n="btn_export_csv">Export CSV</button>
            <button id="exportJsonBtn" data-i18n="btn_export_json">Export JSON</button>
          </div>
          <table>
            <thead>
              <tr><th data-i18n="table_time">Zeit</th><th data-i18n="table_module">Modul</th><th>Severity</th><th>Event</th><th>Summary</th></tr>
            </thead>
            <tbody id="logRows"></tbody>
          </table>
        </div>
      </section>

      <section class="view" id="view-settings">
        <div class="card">
          <h2 data-i18n="settings_title">Sicherheits-Einstellungen</h2>
          <div class="settings-grid">
            <label data-i18n="settings_language">Sprache
              <select id="languageSelect">
                <option value="de">Deutsch</option>
                <option value="en">English</option>
              </select>
            </label>
            <label data-i18n="settings_cpu">CPU Alert Threshold (%)
              <input type="number" id="cpuThresholdInput" min="20" max="95" step="1" />
            </label>
            <label data-i18n="settings_memory">Memory Alert Threshold (%)
              <input type="number" id="memoryThresholdInput" min="20" max="95" step="1" />
            </label>
            <label class="checkbox-row">
              <input type="checkbox" id="dryRunInput" />
              <span data-i18n="settings_dry_run">Response Engine im Dry-Run-Modus</span>
            </label>
            <label class="checkbox-row">
              <input type="checkbox" id="autoScanInput" />
              <span data-i18n="settings_autoscan">Automatischer Scan beim Start</span>
            </label>
          </div>
          <div class="actions">
            <button id="saveSettingsBtn" data-i18n="btn_save_settings">Einstellungen speichern</button>
            <button id="reloadSettingsBtn" data-i18n="btn_reload_settings">Neu laden</button>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div id="statusBar">Bereit.</div>
      <div class="copyright">Copyright 2026 by Samuel J. Tirwa.</div>
    </footer>

    <script src="./app.js" type="module"></script>
  </body>
</html>
